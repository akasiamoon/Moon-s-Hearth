@import url('');

/* --- 1. THE REBORN ANIMATIONS --- */

@keyframes hearthPulse {
0%, 100% { opacity: 0.1; }
50% { opacity: 0.45; }
}

@keyframes dustDrift {
0% { transform: translate(0, 0); opacity: 0; }
20% { opacity: 0.8; }
80% { opacity: 0.8; }
100% { transform: translate(80px, -120px); opacity: 0; }
}

@keyframes goldShimmer {
to { background-position: 200% center; }
}

/* --- 2. FOUNDATION --- */
html, body {
margin: 0; padding: 0; width: 100vw; height: 100vh;
overflow: hidden; background: #000; color: #e0e0e0;
font-family: 'Quicksand', sans-serif;
}

/* --- 3. THE FIRE GLOW (The Flicker Fix) --- */
body::before {
content: "";
position: fixed; top: 0; left: 0; width: 100%; height: 100%;
background: radial-gradient(circle at 85% 85%, rgba(255, 140, 0, 0.45), transparent 70%);
z-index: 2;
pointer-events: none;
animation: hearthPulse 4s infinite ease-in-out;
}

/* --- 4. THE DUST MOTES (High Visibility) --- */
.dust-container {
position: fixed; top: 0; left: 0; width: 100%; height: 100%;
z-index: 10; pointer-events: none;
background-image:
radial-gradient(circle, rgba(255, 202, 40, 0.7) 2.5px, transparent 2.5px),
radial-gradient(circle, rgba(255, 255, 255, 0.5) 1.5px, transparent 1.5px);
background-size: 180px 180px, 250px 250px;
filter: blur(0.5px);
animation: dustDrift 15s linear infinite;
}

/* --- 5. THE BACKGROUND --- */
.master-image {
width: 100%; height: 100%; object-fit: cover;
position: fixed; top: 0; left: 0; z-index: 1;
filter: brightness(0.5) contrast(1.1) sepia(0.2);
transition: 0.8s ease;
}

.master-image.dimmed {
filter: brightness(0.15) blur(12px);
transform: scale(1.05);
}

/* --- 6. THE GILDED DOSSIER & SCROLLWORK --- */
#parchment-overlay {
position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%) scale(1.1);
width: 85%; max-width: 500px; background: rgba(8, 8, 10, 0.98); backdrop-filter: blur(30px);
border: 5px solid;
border-image-source: linear-gradient(45deg, #bf953f, #fcf6ba, #b38728, #fbf5b7, #aa771c);
border-image-slice: 1; padding: 60px 40px; opacity: 0; visibility: hidden; z-index: 10000;
transition: all 0.5s cubic-bezier(0.22, 1, 0.36, 1);
}

#parchment-overlay.active {
opacity: 1; visibility: visible; transform: translate(-50%, -50%) scale(1);
box-shadow: 0 0 100px rgba(0,0,0,1), 0 0 0 1000vw rgba(0,0,0,0.7);
}

#portal-content {
position: relative; color: #d4c8a8; line-height: 1.8; font-size: 1.15em;
text-align: center; margin-top: 30px; padding: 25px;
border: 1px solid rgba(191, 149, 63, 0.3);
}

#portal-content::before, #portal-content::after {
content: "◈━━━━━━༺ ❦ ༻━━━━━━◈";
position: absolute; left: 0; right: 0; color: #bf953f; font-size: 14px; opacity: 0.8; letter-spacing: 2px;
}
#portal-content::before { top: -15px; }
#portal-content::after { bottom: -15px; }

h2 {
font-family: 'Cinzel', serif;
background: linear-gradient(to right, #bf953f, #fcf6ba, #bf953f);
background-size: 200% auto; -webkit-background-clip: text; -webkit-text-fill-color: transparent;
animation: goldShimmer 6s linear infinite; text-align: center; letter-spacing: 5px; text-transform: uppercase;
margin: 0; padding-bottom: 25px;
}

.close-btn { position: absolute; top: 15px; right: 20px; color: #bf953f; font-size: 28px; cursor: pointer; }

/* --- 7. COORDINATES --- */
.portal { position: absolute; cursor: crosshair; z-index: 1000; background: transparent; border: none; }
.portal:hover { background: radial-gradient(circle, rgba(255, 202, 40, 0.15) 0%, transparent 75%); }

#portal-window   { top: 5%;  left: 5%;   width: 35%; height: 50%; }
#portal-herbs    { top: 2%;  left: 55%;  width: 20%; height: 20%; }
#portal-audio    { top: 40%; left: 42%;  width: 10%; height: 15%; }
#portal-grimoire { top: 38%; left: 55%;  width: 12%; height: 18%; }
#portal-alchemy  { top: 60%; left: 10%;  width: 30%; height: 35%; }
#portal-teacup   { top: 70%; left: 55%;  width: 10%; height: 12%; }
#portal-cat      { top: 65%; left: 68%;  width: 28%; height: 30%; }
#portal-sewing   { top: 82%; left: 35%;  width: 15%; height: 15%; }
/* --- 8. THE AUDIO GRIMOIRE (Soundscape) --- */

#soundscape-container {
  display: grid;
  /* Creates compact columns to fit inside your parchment overlay */
  grid-template-columns: repeat(auto-fit, minmax(130px, 1fr));
  gap: 12px;
  margin-top: 15px;
  max-height: 50vh; /* Prevents the overlay from growing taller than the screen */
  overflow-y: auto; /* Adds a scrollbar if all 21 items don't fit */
  padding-right: 10px;
}

/* Custom Gilded Scrollbar for the audio menu */
#soundscape-container::-webkit-scrollbar { width: 6px; }
#soundscape-container::-webkit-scrollbar-track { background: rgba(0, 0, 0, 0.2); }
#soundscape-container::-webkit-scrollbar-thumb { background: #bf953f; border-radius: 3px; }

.sound-item {
  background: rgba(8, 8, 10, 0.6);
  border: 1px solid rgba(191, 149, 63, 0.2);
  padding: 10px;
  border-radius: 2px;
  text-align: center;
  transition: all 0.3s ease;
}

.sound-item:hover {
  border-color: #bf953f;
  box-shadow: 0 0 10px rgba(191, 149, 63, 0.15);
}

.play-btn {
  width: 100%;
  background: transparent;
  color: #d4c8a8;
  border: 1px solid rgba(191, 149, 63, 0.4);
  padding: 8px 4px;
  font-family: 'Quicksand', sans-serif;
  font-size: 0.85em;
  cursor: pointer;
  margin-bottom: 8px;
  transition: all 0.3s ease;
  text-transform: uppercase;
  letter-spacing: 1px;
}

.play-btn:hover {
  background: rgba(191, 149, 63, 0.15);
  color: #fcf6ba;
}

.play-btn.active {
  background: rgba(191, 149, 63, 0.3);
  border-color: #fcf6ba;
  color: #fff;
  text-shadow: 0 0 5px rgba(255, 255, 255, 0.5);
}

.volume-slider {
  width: 90%;
  cursor: pointer;
  accent-color: #bf953f; /* Matches your gold gradient */
}
/* --- 9. THE KITCHEN GRIMOIRE --- */
#grimoire-container {
  margin-top: 15px;
  max-height: 50vh;
  overflow-y: auto;
  padding-right: 10px;
}

#grimoire-container::-webkit-scrollbar { width: 6px; }
#grimoire-container::-webkit-scrollbar-track { background: rgba(0, 0, 0, 0.2); }
#grimoire-container::-webkit-scrollbar-thumb { background: #bf953f; border-radius: 3px; }

.grimoire-header {
  width: 100%;
  background: rgba(8, 8, 10, 0.8);
  color: #bf953f;
  border: 1px solid rgba(191, 149, 63, 0.4);
  padding: 12px 18px;
  font-family: 'Cinzel', serif;
  font-size: 1.1em;
  text-align: left;
  cursor: pointer;
  transition: all 0.3s ease;
  margin-bottom: 5px;
  border-radius: 2px;
  letter-spacing: 1px;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.grimoire-header:hover {
  background: rgba(191, 149, 63, 0.15);
  color: #fcf6ba;
  box-shadow: 0 0 10px rgba(191, 149, 63, 0.15);
}

.grimoire-header.active {
  border-color: #fcf6ba;
  background: rgba(191, 149, 63, 0.2);
}

/* The magical expanding icon */
.grimoire-header::after {
  content: '\2727'; /* A four-pointed magic star */
  font-size: 1.2em;
  color: #bf953f;
  transition: transform 0.4s ease, opacity 0.4s ease;
}

.grimoire-header.active::after {
  transform: rotate(180deg);
  opacity: 0.5;
}

.grimoire-panel {
  padding: 0 15px;
  background: rgba(0, 0, 0, 0.4);
  border-left: 2px solid #bf953f;
  margin-bottom: 10px;
  max-height: 0;
  overflow: hidden;
  transition: max-height 0.4s ease-out, padding 0.4s ease-out;
  color: #d4c8a8;
  font-family: 'Quicksand', sans-serif;
  font-size: 0.95em;
  line-height: 1.6;
}

.grimoire-panel p {
  margin: 10px 0;
}

/* Golden bullet points */
.grimoire-panel ul {
  list-style-type: square;
  color: #bf953f; 
  padding-left: 20px;
}

.grimoire-panel ul li span {
  color: #d4c8a8; 
}
/* --- 10. THE BOUNTY BOARD --- */
#bounty-container {
  margin-top: 15px;
  max-height: 50vh;
  overflow-y: auto;
  padding-right: 10px;
  text-align: left;
}

#bounty-container::-webkit-scrollbar { width: 6px; }
#bounty-container::-webkit-scrollbar-track { background: rgba(0, 0, 0, 0.2); }
#bounty-container::-webkit-scrollbar-thumb { background: #bf953f; border-radius: 3px; }

/* The beautiful box for each quest */
.quest-item {
  background: rgba(8, 8, 10, 0.8);
  border: 1px solid rgba(191, 149, 63, 0.4);
  padding: 12px 15px;
  border-radius: 4px;
  margin-bottom: 10px;
  display: flex;
  align-items: flex-start;
  gap: 15px;
  transition: all 0.3s ease;
  cursor: pointer;
}

.quest-item:hover {
  background: rgba(191, 149, 63, 0.15);
  border-color: #fcf6ba;
  box-shadow: 0 0 10px rgba(191, 149, 63, 0.15);
}

/* The custom empty checkbox */
.quest-checkbox {
  width: 22px;
  height: 22px;
  border: 2px solid #bf953f;
  border-radius: 3px;
  display: flex;
  justify-content: center;
  align-items: center;
  flex-shrink: 0;
  transition: all 0.3s ease;
  margin-top: 2px;
}

/* What happens when you click it (Fills with gold) */
.quest-item.completed .quest-checkbox {
  background: #bf953f;
  border-color: #fcf6ba;
  box-shadow: 0 0 8px rgba(191, 149, 63, 0.6);
}

/* The actual checkmark inside the box */
.quest-item.completed .quest-checkbox::after {
  content: '✓';
  color: #000;
  font-weight: bold;
  font-size: 16px;
}

/* The text formatting */
.quest-details {
  flex-grow: 1;
  transition: all 0.3s ease;
}

.quest-title {
  color: #bf953f;
  font-family: 'Cinzel', serif;
  font-size: 1.1em;
  margin: 0 0 4px 0;
  letter-spacing: 1px;
}

.quest-desc {
  color: #d4c8a8;
  font-size: 0.9em;
  margin: 0;
  opacity: 0.9;
  font-family: 'Quicksand', sans-serif;
}

/* The satisfying strike-through effect when finished */
.quest-item.completed .quest-details {
  opacity: 0.4;
  text-decoration: line-through;
  text-decoration-color: #bf953f;
}
